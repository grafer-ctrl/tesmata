<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Chroma Mind - Stroop Test</title>
    <style>
        :root {
            --bg: #f4f4f4;
            --text: #333;
            --ad-h: 75px;
        }
        * { box-sizing: border-box; user-select: none; -webkit-tap-highlight-color: transparent; }
        body {
            margin: 0; padding: 0; font-family: 'Arial', sans-serif;
            background: var(--bg); height: 100vh; display: flex; flex-direction: column; overflow: hidden;
        }
        
        /* GAME AREA */
        #game-zone {
            flex: 1; display: flex; flex-direction: column;
            align-items: center; justify-content: center;
            position: relative;
        }

        /* THE TRICKY WORD */
        #word-display {
            font-size: 5rem;
            font-weight: 900;
            text-transform: uppercase;
            margin-bottom: 50px;
            text-shadow: 2px 2px 0px rgba(0,0,0,0.1);
        }

        /* BUTTONS GRID */
        #controls {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            width: 100%;
            max-width: 400px;
            padding: 20px;
        }

        .color-btn {
            border: none; padding: 20px;
            border-radius: 15px; font-size: 1.2rem;
            font-weight: bold; color: white;
            cursor: pointer; text-transform: uppercase;
            box-shadow: 0 5px 0 rgba(0,0,0,0.2);
            transition: transform 0.1s;
        }
        .color-btn:active { transform: translateY(5px); box-shadow: none; }

        /* HUD */
        #hud {
            position: absolute; top: 0; width: 100%;
            padding: 20px; display: flex; justify-content: space-between;
            font-size: 1.2rem; font-weight: bold; color: #555;
        }

        /* SCREENS */
        .screen {
            position: absolute; top:0; left:0; width:100%; height:100%;
            background: white; display: none; flex-direction: column;
            align-items: center; justify-content: center; z-index: 10; text-align: center;
        }
        .screen.active { display: flex; }
        
        .btn-main {
            background: #333; color: white; border: none; padding: 15px 40px;
            font-size: 1.2rem; border-radius: 50px; margin-top: 20px;
        }

        /* AD */
        #ad-box {
            height: var(--ad-h); background: #000;
            display: flex; justify-content: center; align-items: center;
            border-top: 1px solid #ccc;
        }
    </style>
</head>
<body>

    <div id="hud">
        <span>Score: <span id="score">0</span></span>
        <span>‚è≥ <span id="time">30</span>s</span>
    </div>

    <div id="game-zone">
        <div id="word-display">READY</div>
        <div id="controls">
            <!-- Buttons generated by JS -->
        </div>
    </div>

    <!-- MENU -->
    <div id="s-menu" class="screen active">
        <h1 style="font-size:3rem;">üß†</h1>
        <h1>CHROMA MIND</h1>
        <p>Tap the button that matches the <b>INK COLOR</b>,<br>NOT the word!</p>
        <button class="btn-main" onclick="game.start()">START</button>
    </div>

    <!-- RESULT -->
    <div id="s-over" class="screen">
        <h2>TIME'S UP</h2>
        <h1>Score: <span id="final-score">0</span></h1>
        <button class="btn-main" onclick="game.start()">RETRY</button>
    </div>

    <!-- ADS -->
    <div id="ad-box">
        <div style="transform: scale(0.75);">
             <script type="text/javascript">
                atOptions = { 'key' : '2a28cd5411ae53a35cf4ec828d845d19', 'format' : 'iframe', 'height' : 60, 'width' : 468, 'params' : {} };
            </script>
            <script type="text/javascript" src="https://www.highperformanceformat.com/2a28cd5411ae53a35cf4ec828d845d19/invoke.js"></script>
        </div>
    </div>

    <script>
        const game = {
            score: 0, time: 30, timer: null,
            colors: [
                { name: 'RED', hex: '#ff4757' },
                { name: 'BLUE', hex: '#3742fa' },
                { name: 'GREEN', hex: '#2ed573' },
                { name: 'YELLOW', hex: '#ffa502' }
            ],
            currentColor: null,

            start: function() {
                this.score = 0; this.time = 30;
                this.updateUI();
                document.querySelector('.screen.active').classList.remove('active');
                this.nextRound();
                
                this.timer = setInterval(() => {
                    this.time--;
                    this.updateUI();
                    if(this.time <= 0) this.end();
                }, 1000);
            },

            nextRound: function() {
                // 1. Text Word (Random)
                const txtObj = this.colors[Math.floor(Math.random() * this.colors.length)];
                // 2. Ink Color (Random)
                const inkObj = this.colors[Math.floor(Math.random() * this.colors.length)];
                
                this.currentColor = inkObj.name; // Target answer

                const wordEl = document.getElementById('word-display');
                wordEl.innerText = txtObj.name;
                wordEl.style.color = inkObj.hex;

                // 3. Render Buttons (Fixed order or Random order?)
                const btnContainer = document.getElementById('controls');
                btnContainer.innerHTML = '';
                
                this.colors.forEach(c => {
                    let btn = document.createElement('button');
                    btn.className = 'color-btn';
                    btn.style.backgroundColor = c.hex;
                    btn.innerText = c.name; // Optional: Remove text from button for Hard Mode
                    btn.onclick = () => this.check(c.name);
                    btnContainer.appendChild(btn);
                });
            },

            check: function(choice) {
                if(choice === this.currentColor) {
                    this.score++;
                    this.nextRound();
                } else {
                    this.time -= 3; // Penalty
                    // Screen flash red
                    document.body.style.background = '#ffcccc';
                    setTimeout(() => document.body.style.background = '#f4f4f4', 200);
                    if(this.time < 0) this.time = 0;
                }
                this.updateUI();
            },

            updateUI: function() {
                document.getElementById('score').innerText = this.score;
                document.getElementById('time').innerText = this.time;
            },

            end: function() {
                clearInterval(this.timer);
                document.getElementById('final-score').innerText = this.score;
                document.getElementById('s-over').classList.add('active');
            }
        };
    </script>
</body>
</html>